<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Source Themes Academic 4.8.0"><meta name=description content="Overview In a Calypso context, it is useful when your SAM reader and/or your PO reader aren&rsquo;t connected to the same terminal.
To solve this need, Keyple provides the &ldquo;Keyple Remote Plugin&rdquo; which allows a terminal to communicate with a smart card reader plugged into another terminal."><link rel=alternate hreflang=en-us href=/keyple-website/docs/developer-guide/develop-ticketing-app-remote/><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta name=theme-color content="#1D87BB"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/dracula.min.css crossorigin=anonymous title=hl-dark disabled><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin=anonymous async></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=%7CWork+Sans:ital,wght@0,300;1,500&display=swap"><link rel=stylesheet href=/keyple-website/css/academic.css><link rel=manifest href=/keyple-website/index.webmanifest><link rel=icon type=image/png href=/keyple-website/images/icon_hu16db34b3636b127457de39ca2fab620f_9845_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/keyple-website/images/icon_hu16db34b3636b127457de39ca2fab620f_9845_192x192_fill_lanczos_center_2.png><link rel=canonical href=/keyple-website/docs/developer-guide/develop-ticketing-app-remote/><meta property="twitter:card" content="summary"><meta property="og:site_name" content="Eclipse Keyple"><meta property="og:url" content="/keyple-website/docs/developer-guide/develop-ticketing-app-remote/"><meta property="og:title" content="Develop a Remote Ticketing Application | Eclipse Keyple"><meta property="og:description" content="Overview In a Calypso context, it is useful when your SAM reader and/or your PO reader aren&rsquo;t connected to the same terminal.
To solve this need, Keyple provides the &ldquo;Keyple Remote Plugin&rdquo; which allows a terminal to communicate with a smart card reader plugged into another terminal."><meta property="og:image" content="/keyple-website/images/logo_hu673a59176cd62c570f44ed2728665b48_42188_300x300_fit_lanczos_2.png"><meta property="twitter:image" content="/keyple-website/images/logo_hu673a59176cd62c570f44ed2728665b48_42188_300x300_fit_lanczos_2.png"><meta property="og:locale" content="en-us"><meta property="article:modified_time" content="2020-10-27T15:32:00+01:00"><script src=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin=anonymous><script>window.addEventListener("load",function(){window.cookieconsent.initialise({"palette":{"popup":{"background":"#1D87BB","text":"#FFFFFF"},"button":{"background":"#FFFFFF","text":"#1D87BB"}},"theme":"classic","type":"opt-in","content":{"header":'Cookiessss used on the website!',"message":"Some Eclipse Foundation pages use cookies to better serve you when you return to the site. You can set your browser to notify you before you receive a cookie or turn off cookies. If you do so, however, some areas of some sites may not function properly. To read Eclipse Foundation Privacy Policy ","allow":"Allow cookies","deny":"Decline","dismiss":"Got it!","link":"click here","href":'https://www.eclipse.org/legal/privacy.php'},})});</script><title>Develop a Remote Ticketing Application | Eclipse Keyple</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><script>const isSiteThemeDark=false;</script><script src=/keyple-website/js/load-theme.js></script><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/keyple-website/><img src=/keyple-website/images/logo_hu673a59176cd62c570f44ed2728665b48_42188_0x70_resize_lanczos_2.png alt="Eclipse Keyple"></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/keyple-website/><img src=/keyple-website/images/logo_hu673a59176cd62c570f44ed2728665b48_42188_0x70_resize_lanczos_2.png alt="Eclipse Keyple"></a></div><div class="navbar-collapse main-menu-item collapse justify-content-center" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>What is Eclipse Keyple™</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/keyple-website/what-is-keyple/main-features/><span>Keyple's main features</span></a>
<a class=dropdown-item href=/keyple-website/what-is-keyple/what-is-calypso/><span>What is Calypso®?</span></a>
<a class=dropdown-item href=/keyple-website/what-is-keyple/who-is-it-for/><span>Who is it for?</span></a>
<a class=dropdown-item href=/keyple-website/what-is-keyple/why-trust/><span>Why trust Eclipse Keyple™?</span></a>
<a class=dropdown-item href=/keyple-website/what-is-keyple/overview/><span>Overview</span></a></div></li><li class=nav-item><a class=nav-link href=/keyple-website/components/><span>Components</span></a></li><li class=nav-item><a class=nav-link href=/keyple-website/#news><span>News</span></a></li><li class=nav-item><a class="nav-link active" href=/keyple-website/docs/><span>Documentation</span></a></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>Support & Trainings</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=/keyple-website/support-trainings/cna/><span>Calypso Networks Association</span></a></div></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li></ul></div></nav><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar"><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-3" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation">
<span><i class="fas fa-bars"></i></span></button>
<input name=q type=search class=form-control placeholder=Search... autocomplete=off></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li><a href=/keyple-website/docs/></a></li><div class=docs-toc-item><a class=docs-toc-link href=/keyple-website/docs/architecture/><i class="fas fa-sitemap pr-1"></i>Architecture</a><ul class="nav docs-sidenav"><li><a href=/keyple-website/docs/architecture/keyple-global/>Global Architecture</a></li><li><a href=/keyple-website/docs/architecture/keyple-core/>Keyple Core</a></li><li><a href=/keyple-website/docs/architecture/keyple-calypso/>Keyple Calypso</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/keyple-website/docs/build-your-first-app/><i class="fas fa-rocket pr-1"></i>Build your First App</a><ul class="nav docs-sidenav"><li><a href=/keyple-website/docs/build-your-first-app/java-app/>Java App</a></li><li><a href=/keyple-website/docs/build-your-first-app/android-app/>Android App</a></li><li><a href=/keyple-website/docs/build-your-first-app/cpp-app/>C++ App</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/keyple-website/docs/developer-guide/><i class="fas fa-chalkboard-teacher pr-1"></i>Developer Guides</a><ul class="nav docs-sidenav"><li><a href=/keyple-website/docs/developer-guide/develop-ticketing-app-local/>Develop a Local Ticketing Application</a></li><li class=active><a href=/keyple-website/docs/developer-guide/develop-ticketing-app-remote/>Develop a Remote Ticketing Application</a></li><li><a href=/keyple-website/docs/developer-guide/develop-plugin/>Develop a Plugin</a></li><li><a href=/keyple-website/docs/developer-guide/develop-extension/>Develop an Extension</a></li><li><a href=/keyple-website/docs/developer-guide/migration-0.8.1-to-0.9.0/>Keyple Java 0.8.1 to 0.9.0</a></li></ul></div><div class=docs-toc-item><a class=docs-toc-link href=/keyple-website/docs/api-reference/><i class="fas fa-plug pr-1"></i>API Reference</a></div></ul></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents><ul><li><a href=#overview>Overview</a><ul><li><a href=#glossary>Glossary</a></li><li><a href=#concepts>Concepts</a></li></ul></li><li><a href=#how-to-use-it->How to use it ?</a></li><li><a href=#use-cases>Use cases</a><ul><li><a href=#remote-server-plugin>Remote Server Plugin</a></li><li><a href=#remote-client-plugin>Remote Client Plugin</a></li><li><a href=#remote-client-observable-plugin>Remote Client Observable Plugin</a></li><li><a href=#remote-pool-client-plugin>Remote Pool Client Plugin</a></li></ul></li><li><a href=#network-configuration>Network configuration</a><ul><li><a href=#synchronous>Synchronous</a></li><li><a href=#asynchronous>Asynchronous</a></li><li><a href=#exchanged-data>Exchanged data</a></li></ul></li><li><a href=#public-api>Public API</a></li><li><a href=#download>Download</a><ul><li><a href=#releases>Releases</a></li><li><a href=#using-gradle>Using Gradle</a></li><li><a href=#using-maven>Using Maven</a></li><li><a href=#binaries--documentation>Binaries & Documentation</a></li><li><a href=#sources>Sources</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main><article class=article><div class=docs-article-container><h1>Develop a Remote Ticketing Application</h1><div class=article-style><h2 id=overview>Overview</h2><p>In a Calypso context, it is useful when your SAM reader and/or your PO reader aren&rsquo;t connected to the same terminal.</p><p>To solve this need, <strong>Keyple provides the &ldquo;Keyple Remote Plugin&rdquo; which allows a terminal to communicate with a smart card reader plugged into another terminal</strong>.</p><p>In this way, you can manage Calypso transaction within a distributed architecture.</p><p>The diagram below shows the role of the <strong>Keyple Remote Plugin</strong> components in the software layers used in a distributed architecture :</p><figure><a data-fancybox href=/keyple-website/media/remote-plugin/component/Remote_Component_Layers_Overview.svg><img src=/keyple-website/media/remote-plugin/component/Remote_Component_Layers_Overview.svg alt></a></figure><h3 id=glossary>Glossary</h3><div id=glossary-table-1><table><thead><tr><th></th><th>Description</th></tr></thead><tbody><tr><td><strong>Virtual Lib</strong></td><td>This is the library <code>keyple-plugin-remote-virtual</code>. It must be imported and used by the application installed on the terminal not having local access to the smart card reader and that wishes to control the reader remotely.</td></tr><tr><td><strong>Native Lib</strong></td><td>This is the library <code>keyple-plugin-remote-native</code>. It must be imported and used by the application installed on the terminal having local access to the smart card reader but wishes to delegate all or part of the ticketing processing to a remote application.</td></tr><tr><td><strong>Remote Plugin</strong></td><td>Part of the <strong>Virtual Lib</strong>, it is a remote virtual plugin which provides only virtual readers to the application. It manages data exchanges with the <strong>Native Service</strong>. This plugin must be registered to the smart card service as a native plugin.</td></tr><tr><td><strong>Native Service</strong></td><td>Part of the <strong>Native Lib</strong>, this service ensures data exchange between the <strong>Remote Plugin</strong> and native plugins and readers. It must be initialized and started by the host application.</td></tr><tr><td><strong>Factory</strong></td><td><strong>Remote Plugin</strong> and <strong>Native Service</strong> each have a specific factory class to initialize them.</td></tr><tr><td><strong>Utility</strong></td><td><strong>Remote Plugin</strong> and <strong>Native Service</strong> each have a specific utility class to access them everywhere in the code.</td></tr><tr><td><strong>Node</strong></td><td><strong>Remote Plugin</strong> and <strong>Native Service</strong> each are associated to a specific node which is responsible for the transport layer and the interfacing with the <strong>Network Endpoint</strong>.</td></tr><tr><td><strong>Network Endpoint</strong></td><td>At the user&rsquo;s charge, this component ensures the network exchanges between the <strong>Remote Plugin</strong> and <strong>Native Service</strong> nodes.</td></tr></tbody></table></div><style>#glossary-table-1 table th:first-of-type{width:120px}</style><h3 id=concepts>Concepts</h3><p>The diagram below shows the main functional concepts of the <strong>Keyple Remote Plugin</strong> through an arbitrary situation :</p><figure><a data-fancybox href=/keyple-website/media/remote-plugin/component/Remote_Component_Concepts.svg><img src=/keyple-website/media/remote-plugin/component/Remote_Component_Concepts.svg alt></a></figure><p>Here are the main concepts to remember :</p><ul><li>The <strong>Keyple Remote Plugin</strong> is composed by two main components exchanging data with each other, the <strong>Remote Plugin</strong> and the <strong>Native Service</strong>.</li><li>The application installed on the terminal <strong>that does not have local access</strong> to the smart card reader must register the <strong>Remote Plugin</strong> using the smart card service, as for a native plugin, but then manipulates <strong>virtual readers</strong> only.</li><li>The application installed on the terminal <strong>with local access</strong> to the smart card reader must register one or many specific native plugins (PCSC,&mldr;) using the smart card service and start the <strong>Native Service</strong> in background.</li><li>Each native reader has a remote virtual reader.</li><li>Any command sent by the remote application to a virtual reader will be forwarded to the associated native reader.</li><li>Any event received by a native reader or plugin will be forwarded to the associated remote virtual reader or plugin.</li></ul><h2 id=how-to-use-it->How to use it ?</h2><ol><li>Read first
<a href=#overview>Overview</a> chapter to understand the main terms and concepts.</li><li>Using chapter
<a href=#use-cases>Use cases</a>, find your use case. This will help you to determine exactly which API described in
<a href=#public-api>Public API</a> chapter and library to use.</li><li>Using chapter
<a href=#download>Download</a>, import into your project the libraries specified by your use case.</li><li>Using chapters
<a href=#network-configuration>Network configuration</a> and
<a href=#public-api>Public API</a>, implement the transport layer using the sequence diagram adapted to your network configuration.</li><li>Implement your ticketing services as specified in the associated use case.</li></ol><h2 id=use-cases>Use cases</h2><p>There are 4 possible <strong>Keyple Remote Plugin APIs</strong> designed on a <strong>Client-Server</strong> model in which <strong>the Client is always the initiator of the processing</strong> :</p><div id=use-cases-table-1><table><thead><tr><th>Plugin API</th><th>Description</th></tr></thead><tbody><tr><td>Remote Server Plugin</td><td>Allows to control from a <strong>server</strong> terminal a smart card reader plugged into a <strong>client</strong> terminal (e.g. PO reader).</td></tr><tr><td>Remote Client Plugin,<br>Remote Client Observable Plugin</td><td>Allows to control from a <strong>client</strong> terminal a smart card reader plugged into a <strong>server</strong> terminal (e.g. SAM reader).</td></tr><tr><td>Remote Pool Client Plugin</td><td>Allows to control from a <strong>client</strong> terminal a <strong>pool</strong> of smart cards readers plugged into a <strong>server</strong> terminal (e.g. HSM readers).</td></tr></tbody></table></div><style>#use-cases-table-1 table th:first-of-type{width:240px}</style><p>More over, some plugins have different modes in which they allow or not the observation of plugin or reader events (such as reader connection, smart card insertion, etc&mldr;).</p><p>Here is a summary table of all proposed use cases. Search for the one that corresponds to your need and then look at the description of the associated plugin to use :</p><div id=use-cases-table-2><table><thead><tr><th style=text-align:center>Use Case</th><th style=text-align:center>Reader type</th><th style=text-align:center>Reader endpoint</th><th style=text-align:center>Reader observation</th><th style=text-align:center>Plugin observation</th><th style=text-align:center>Plugin to use</th></tr></thead><tbody><tr><td style=text-align:center>UC 1</td><td style=text-align:center>Simple</td><td style=text-align:center>Client</td><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center><a href=#remote-server-plugin-uc-1-2>Remote Server Plugin</a></td></tr><tr><td style=text-align:center>UC 2</td><td style=text-align:center>Simple</td><td style=text-align:center>Client</td><td style=text-align:center>X</td><td style=text-align:center></td><td style=text-align:center><a href=#remote-server-plugin-uc-1-2>Remote Server Plugin</a></td></tr><tr><td style=text-align:center>UC 3</td><td style=text-align:center>Simple</td><td style=text-align:center>Server</td><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center><a href=#remote-client-plugin-uc-3-4>Remote Client Plugin</a></td></tr><tr><td style=text-align:center>UC 4</td><td style=text-align:center>Simple</td><td style=text-align:center>Server</td><td style=text-align:center>X</td><td style=text-align:center></td><td style=text-align:center><a href=#remote-client-plugin-uc-3-4>Remote Client Plugin</a></td></tr><tr><td style=text-align:center>UC 5</td><td style=text-align:center>Simple</td><td style=text-align:center>Server</td><td style=text-align:center></td><td style=text-align:center>X</td><td style=text-align:center><a href=#remote-client-observable-plugin-uc-5-6>Remote Client Observable Plugin</a></td></tr><tr><td style=text-align:center>UC 6</td><td style=text-align:center>Simple</td><td style=text-align:center>Server</td><td style=text-align:center>X</td><td style=text-align:center>X</td><td style=text-align:center><a href=#remote-client-observable-plugin-uc-5-6>Remote Client Observable Plugin</a></td></tr><tr><td style=text-align:center>UC 7</td><td style=text-align:center>Pool</td><td style=text-align:center>Server</td><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center><a href=#remote-pool-client-plugin-uc-7>Remote Pool Client Plugin</a></td></tr></tbody></table></div><style>#use-cases-table-2 table th:nth-of-type(6){width:240px}</style><h3 id=remote-server-plugin>Remote Server Plugin</h3><p>This plugin allows controlling from a <strong>server</strong> terminal a smart card reader plugged into a <strong>client</strong> terminal (e.g. PO reader).</p><h4 id=technical-specifications>TECHNICAL SPECIFICATIONS</h4><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Library</strong></td><td>Remote Native</td><td>Remote Virtual</td></tr><tr><td><strong>Remote Plugin</strong> / <strong>Native Service</strong></td><td><code>NativeClientService</code></td><td><code>RemoteServerPlugin</code></td></tr><tr><td><strong>Factory</strong></td><td><code>NativeClientServiceFactory</code></td><td><code>RemoteServerPluginFactory</code></td></tr><tr><td><strong>Utility</strong></td><td><code>NativeClientUtils</code></td><td><code>RemoteServerUtils</code></td></tr><tr><td><strong>Nb Max Instances/Application</strong></td><td>1</td><td>2 (1 for <strong>sync</strong> node, 1 for <strong>async</strong> node)</td></tr></tbody></table><h4 id=use>USE</h4><ul><li>Server<ol><li>configure the factory by providing the network and plugin observer implementation,</li><li>register the <strong>Remote Plugin</strong> to the smart card service using the factory,</li><li>await for events of type <code>PluginEvent.READER_CONNECTED</code>,</li><li>when an event occurs, get the specified virtual reader from the <strong>Remote Plugin</strong>,</li><li>use information inside the virtual reader to identify the ticketing service to execute,</li><li>execute the specified ticketing service using the virtual reader and all of its others information,</li><li>terminate the remote ticketing service using the <strong>Remote Plugin</strong> API by transmitting if needed personal information to the client.</li></ol></li><li>Client<ol><li>configure the factory and start the <strong>Native Service</strong> by providing the network implementation,</li><li>register at least a native plugin to the smart card service and get the native reader to connect to the server,</li><li>execute the remote service using the <strong>Native Service</strong> API by indicating the ticketing service id to execute and transmitting to the server if needed personal information or smart card content previously read.</li></ol></li></ul><h4 id=uc-1>UC 1</h4><p>Use this mode if you don&rsquo;t plan to observe &ldquo;remotely&rdquo; the events related to the smart card (insertion, removal,&mldr;).</p><p>Please note that it is still possible to observe locally the reader on the client side if needed.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Factory configuration</strong></td><td><code>withoutReaderObservation()</code></td><td>-</td></tr><tr><td><strong>Reader API</strong></td><td><code>Reader</code> or <code>ObservableReader</code></td><td><code>RemoteServerReader</code></td></tr></tbody></table><h4 id=uc-2>UC 2</h4><p>Use this mode if you plan to observe &ldquo;remotely&rdquo; the events related to the smart card (insertion, removal,&mldr;).</p><p>Please note that this mode is only possible if the native reader is observable.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Factory configuration</strong></td><td><code>withReaderObservation(...)</code></td><td>-</td></tr><tr><td><strong>Reader API</strong></td><td><code>ObservableReader</code></td><td><code>RemoteServerObservableReader</code></td></tr></tbody></table><p>To observe &ldquo;remotely&rdquo; the reader events, you must :</p><ul><li>Server<ol><li>register at least one observer to the virtual reader created during the first client call and await for reader events,</li><li>retrieve the virtual reader from the &ldquo;Remote Plugin&rdquo; <strong>imperatively</strong> using the reader name contained in the received event,</li><li>execute the ticketing service associated to the event using the virtual reader and all of its others information,</li><li>terminate the remote ticketing service associated to the event using the <strong>Remote Plugin</strong> API by transmitting if needed personal information to the client.</li></ol></li><li>Client<ol><li>execute a remote service first in order to associate a remote virtual reader to the native reader and to allow the remote application to subscribe to the events of the virtual reader.</li></ol></li></ul><h4 id=sequence-diagram>SEQUENCE DIAGRAM</h4><p>The following sequence diagram shows the capabilities of the plugin through an arbitrary example that illustrates :</p><ul><li>the initialization phase of the native and virtual components ;</li><li>the registration of the native plugin and observable reader ;</li><li>the selection phase of an observable reader carried out directly by the client ;</li><li>the sending of the selection result and additional information to the server to remotely perform a specific ticketing service (materialization, validation, etc&mldr;) ;</li><li>the reception by the server of the transmitted data ;</li><li>the execution of the remote ticketing service ;</li><li>the server subscription to observable reader events ;</li><li>the sending of information to the client at the end of processing.</li></ul><p>Note that the network layer is deliberately hide in this diagram. Its implementation is describe in the
<a href=#network-configuration>Network configuration</a> chapter.</p><figure><a data-fancybox href=/keyple-website/media/remote-plugin/sequence/Remote_Sequence_RemoteServerPlugin_API.svg><img src=/keyple-website/media/remote-plugin/sequence/Remote_Sequence_RemoteServerPlugin_API.svg alt></a></figure><h3 id=remote-client-plugin>Remote Client Plugin</h3><p>This plugin allows controlling from a <strong>client</strong> terminal a smart card reader plugged into a <strong>server</strong> terminal (e.g. SAM reader).</p><h4 id=technical-specifications-1>TECHNICAL SPECIFICATIONS</h4><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Library</strong></td><td>Remote Virtual</td><td>Remote Native</td></tr><tr><td><strong>Remote Plugin</strong> / <strong>Native Service</strong></td><td><code>RemoteClientPlugin</code></td><td><code>NativeServerService</code></td></tr><tr><td><strong>Factory</strong></td><td><code>RemoteClientPluginFactory</code></td><td><code>NativeServerServiceFactory</code></td></tr><tr><td><strong>Utility</strong></td><td><code>RemoteClientUtils</code></td><td><code>NativeServerUtils</code></td></tr><tr><td><strong>Nb Max Instances/Application</strong></td><td>2 (1 for <strong>sync</strong> node, 1 for <strong>async</strong> node)</td><td>1</td></tr></tbody></table><h4 id=use-1>USE</h4><ul><li>Server<ol><li>configure the factory and start the <strong>Native Service</strong> by providing the network implementation,</li><li>register at least a native plugin to the smart card service.</li></ol></li><li>Client<ol><li>configure the factory by providing the network implementation,</li><li>register the <strong>Remote Plugin</strong> to the smart card service using the factory,</li><li>use the <strong>Remote Plugin</strong> and its virtual readers as a native plugin with native readers.</li></ol></li></ul><h4 id=uc-3>UC 3</h4><p>Use this mode if you don&rsquo;t plan to observe &ldquo;remotely&rdquo; the events related to the smart card (insertion, removal,&mldr;).</p><p>Please note that it is still possible to observe locally the reader on the server side if needed.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Factory configuration</strong></td><td><code>withoutPluginObservation()</code><br><code>withoutReaderObservation()</code></td><td>-</td></tr><tr><td><strong>Reader API</strong></td><td><code>Reader</code></td><td><code>Reader</code> or <code>ObservableReader</code></td></tr></tbody></table><h4 id=uc-4>UC 4</h4><p>Use this mode if you plan to observe &ldquo;remotely&rdquo; the events related to the smart card (insertion, removal,&mldr;).</p><p>Please note that this mode is only possible if the native reader is observable.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Factory configuration</strong></td><td><code>withoutPluginObservation()</code><br><code>withReaderObservation()</code></td><td>-</td></tr><tr><td><strong>Reader API</strong></td><td><code>ObservableReader</code></td><td><code>ObservableReader</code></td></tr></tbody></table><h3 id=remote-client-observable-plugin>Remote Client Observable Plugin</h3><p>This plugin is a variant of the <strong>Remote Client Plugin</strong> which also allows to observe the plugin events.</p><p>Please note that this mode is only possible if the native plugin is observable.</p><h4 id=technical-specifications-2>TECHNICAL SPECIFICATIONS</h4><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Library</strong></td><td>Remote Virtual</td><td>Remote Native</td></tr><tr><td><strong>Remote Plugin</strong> / <strong>Native Service</strong></td><td><code>RemoteClientObservablePlugin</code></td><td><code>NativeServerService</code></td></tr><tr><td><strong>Factory</strong></td><td><code>RemoteClientPluginFactory</code></td><td><code>NativeServerServiceFactory</code></td></tr><tr><td><strong>Utility</strong></td><td><code>RemoteClientUtils</code></td><td><code>NativeServerUtils</code></td></tr><tr><td><strong>Nb Max Instances/Application</strong></td><td>2 (1 for <strong>sync</strong> node, 1 for <strong>async</strong> node)</td><td>1</td></tr></tbody></table><h4 id=use-2>USE</h4><ul><li>Server<ol><li>configure the factory and start the <strong>Native Service</strong> by providing the network implementation,</li><li>register at least a native plugin to the smart card service.</li></ol></li><li>Client<ol><li>configure the factory by providing the network implementation,</li><li>register the <strong>Remote Plugin</strong> to the smart card service using the factory,</li><li>use the <strong>Remote Plugin</strong> and its virtual readers as a native observable plugin with native readers.</li></ol></li></ul><h4 id=uc-5>UC 5</h4><p>Use this mode if you don&rsquo;t plan to observe &ldquo;remotely&rdquo; the events related to the smart card (insertion, removal,&mldr;).</p><p>Please note that it is still possible to observe locally the reader on the server side if needed.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Factory configuration</strong></td><td><code>withPluginObservation()</code><br><code>withoutReaderObservation()</code></td><td>-</td></tr><tr><td><strong>Reader API</strong></td><td><code>Reader</code></td><td><code>Reader</code> or <code>ObservableReader</code></td></tr></tbody></table><h4 id=uc-6>UC 6</h4><p>Use this mode if you plan to observe &ldquo;remotely&rdquo; the events related to the smart card (insertion, removal,&mldr;).</p><p>Please note that this mode is only possible if the native reader is observable.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Factory configuration</strong></td><td><code>withPluginObservation()</code><br><code>withReaderObservation()</code></td><td>-</td></tr><tr><td><strong>Reader API</strong></td><td><code>ObservableReader</code></td><td><code>ObservableReader</code></td></tr></tbody></table><h3 id=remote-pool-client-plugin>Remote Pool Client Plugin</h3><p>This plugin allows controlling from a <strong>client</strong> terminal a pool of smart cards readers plugged into a <strong>server</strong> terminal (e.g. HSM readers).</p><h4 id=technical-specifications-3>TECHNICAL SPECIFICATIONS</h4><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Library</strong></td><td>Remote Virtual</td><td>Remote Native</td></tr><tr><td><strong>Remote Plugin</strong> / <strong>Native Service</strong></td><td><code>RemotePoolClientPlugin</code></td><td><code>NativePoolServerService</code></td></tr><tr><td><strong>Factory</strong></td><td><code>RemotePoolClientPluginFactory</code></td><td><code>NativePoolServerServiceFactory</code></td></tr><tr><td><strong>Utility</strong></td><td><code>RemotePoolClientUtils</code></td><td><code>NativePoolServerUtils</code></td></tr><tr><td><strong>Nb Max Instances/Application</strong></td><td>2 (1 for <strong>sync</strong> node, 1 for <strong>async</strong> node)</td><td>1</td></tr></tbody></table><h4 id=use-3>USE</h4><ul><li>Server<ol><li>configure the factory and start the <strong>Native Service</strong> by providing the network implementation,</li><li>register at least a native pool plugin to the smart card service.</li></ol></li><li>Client<ol><li>configure the factory by providing the network implementation,</li><li>register the <strong>Remote Plugin</strong> to the smart card service using the factory,</li><li>use the <strong>Remote Plugin</strong> and its virtual readers as a native pool plugin with native readers.</li></ol></li></ul><h4 id=uc-7>UC 7</h4><p>This unique mode proposed for this plugin does not allow to observe the reader.</p><table><thead><tr><th></th><th>Client</th><th>Server</th></tr></thead><tbody><tr><td><strong>Factory configuration</strong></td><td>-</td><td>-</td></tr><tr><td><strong>Reader API</strong></td><td><code>Reader</code></td><td><code>Reader</code></td></tr></tbody></table><h2 id=network-configuration>Network configuration</h2><p>Usually distributed architecture will rely on a TCP/IP network to communicate. It is up to the users to choose which protocol to use on top of it.</p><p>The <strong>Keyple Remote Plugin</strong> does not provide the network implementation, but it provides a set of interfaces to be implemented by the user in order to enable it to exchange data between <strong>Remote Plugin</strong> and <strong>Native Service</strong> components.</p><h3 id=synchronous>Synchronous</h3><p>If you want to implement a Client-Server <strong>Synchronous</strong> communication protocol, such as standard HTTP for example, then you should use :</p><ul><li>on <strong>client</strong>, the <code>KeypleClientSyncNode</code> node and provide an implementation of the <code>KeypleClientSync</code> endpoint interface in order to be able to connect to a server to send the requests transmitted by the client node ;</li><li>on <strong>server</strong>, the <code>KeypleServerSyncNode</code> node in order to be able to receive and process the requests received from the client ;</li></ul><p>Here is the minimal algorithm to implement in a context with a <strong>single server instance</strong> :</p><figure><a data-fancybox href=/keyple-website/media/remote-plugin/sequence/Remote_Sequence_SyncNode_API.svg><img src=/keyple-website/media/remote-plugin/sequence/Remote_Sequence_SyncNode_API.svg alt></a></figure><p>In a context with several server instances, a mechanism must be implemented to ensure that all messages containing information about a <code>serverNodeId</code> are routed to the server associated with a <code>KeypleServerSyncNode</code> node having the <code>serverNodeId</code>.</p><h3 id=asynchronous>Asynchronous</h3><p>If you want to implement a Full-Duplex <strong>Asynchronous</strong> communication protocol, such as Web Sockets for example, then you should use :</p><ul><li>on <strong>client</strong>, the <code>KeypleClientAsyncNode</code> node and provide an implementation of the <code>KeypleClientAsync</code> endpoint interface in order to be able to open a session with a server and send the messages transmitted by the client node ;</li><li>on <strong>server</strong>, the <code>KeypleServerAsyncNode</code> node and provide an implementation of the <code>KeypleServerAsync</code> endpoint interface in order to be able to send to the client the messages transmitted by the server node ;</li></ul><p>Here is the minimal algorithm to implement :</p><figure><a data-fancybox href=/keyple-website/media/remote-plugin/sequence/Remote_Sequence_AsyncNode_API.svg><img src=/keyple-website/media/remote-plugin/sequence/Remote_Sequence_AsyncNode_API.svg alt></a></figure><h3 id=exchanged-data>Exchanged data</h3><p>The POJO object <code>KeypleMessageDto</code> contains data exchanged between <strong>Remote Plugin</strong> and <strong>Native Service</strong> components. It is built and processed by the plugin, and <strong>you don&rsquo;t need to modified it</strong>.</p><p>However, it is necessary in some contexts to access certain information such as the <code>sessionId</code> in the case of asynchronous communication or the <code>serverNodeId</code> in the case of synchronous communication with several server instances.</p><h2 id=public-api>Public API</h2><figure><a data-fancybox href=/keyple-website/media/remote-plugin/class/Remote_Class_API.svg><img src=/keyple-website/media/remote-plugin/class/Remote_Class_API.svg alt></a></figure><h2 id=download>Download</h2><h3 id=releases>Releases</h3><table><thead><tr><th>Version</th><th>Date</th><th>Release note</th></tr></thead><tbody><tr><td><strong>1.0.0</strong></td><td>DD/MM/YYYY</td><td>First version</td></tr></tbody></table><h3 id=using-gradle>Using Gradle</h3><p>Virtual Lib</p><pre><code>implementation 'org.eclipse.keyple:keyple-java-plugin-remote-virtual:[TO_REPLACE_BY_VERSION]' 
</code></pre><p>Native Lib</p><pre><code>implementation 'org.eclipse.keyple:keyple-java-plugin-remote-native:[TO_REPLACE_BY_VERSION]' 
</code></pre><h3 id=using-maven>Using Maven</h3><p>Virtual Lib</p><pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.keyple&lt;/groupId&gt;
  &lt;artifactId&gt;keyple-java-plugin-remote-virtual&lt;/artifactId&gt;
  &lt;version&gt;[TO_REPLACE_BY_VERSION]&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p>Native Lib</p><pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.eclipse.keyple&lt;/groupId&gt;
  &lt;artifactId&gt;keyple-java-plugin-remote-native&lt;/artifactId&gt;
  &lt;version&gt;[TO_REPLACE_BY_VERSION]&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><h3 id=binaries--documentation>Binaries & Documentation</h3><table><thead><tr><th>Version</th><th>Binaries</th><th>Javadoc</th></tr></thead><tbody><tr><td><strong>1.0.0</strong></td><td>keyple-java-plugin-remote-virtual-1.0.0.jar<br>keyple-java-plugin-remote-native-1.0.0.jar</td><td>keyple-java-plugin-remote-virtual-doc-1.0.0.zip<br>keyple-java-plugin-remote-native-doc-1.0.0.zip</td></tr></tbody></table><h3 id=sources>Sources</h3><ul><li><a href=https://github.com/eclipse/keyple-java/tree/master/java/component/keyple-plugin/remote-plugin/virtual/README.md target=_blank rel=noopener>Virtual Lib
<i class="fab fa-github pr-1 fa-fw"></i></a></li><li><a href=https://github.com/eclipse/keyple-java/tree/master/java/component/keyple-plugin/remote-plugin/native/README.md target=_blank rel=noopener>Native Lib
<i class="fab fa-github pr-1 fa-fw"></i></a></li><li><a href=https://github.com/eclipse/keyple-java/tree/master/java/component/keyple-plugin/remote-plugin/core/README.md target=_blank rel=noopener>Core Lib
<i class="fab fa-github pr-1 fa-fw"></i></a></li></ul></div><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Previous</div><a href=/keyple-website/docs/developer-guide/develop-ticketing-app-local/ rel=next>Develop a Local Ticketing Application</a></div><div class=post-nav-item><div class=meta-nav>Next</div><a href=/keyple-website/docs/developer-guide/develop-plugin/ rel=prev>Develop a Plugin</a></div></div></div></div><div class=body-footer><p>Last updated on Tue, Oct 27, 2020</p></div></article><footer class=site-footer><div class=container><div class="row featurette"><div class="col-12 col-sm-4"><h4>More</h4><ul><li><a href=https://github.com/eclipse/keyple title="View Source Code on GitHub"><i class="fab fa-github"></i>GitHub Repository</a></li><li><a href=https://accounts.eclipse.org/mailing-list/keyple-user title="Keyple progress information and user discussions"><i class="fas fa-envelope"></i>User mailing list</a></li><li><a href=https://accounts.eclipse.org/mailing-list/keyple-dev title="Keyple developer discussions"><i class="fas fa-envelope"></i>Developer mailing list</a></li></ul></div><div class="col-12 col-sm-4"><h4>Eclipse Foundation</h4><ul><li><a href=https://www.eclipse.org/org/>About Eclipse Foundation</a></li><li><a href=https://www.eclipse.org/org/foundation/contact.php>Contact Eclipse Foundation</a></li><li><a href=https://www.eclipse.org/donate>Donate</a></li><li><a href=https://www.eclipse.org/membership>Members</a></li><li><a href=https://www.eclipse.org/org/documents/>Governance</a></li><li><a href=https://www.eclipse.org/org/documents/Community_Code_of_Conduct.php>Code of Conduct</a></li><li><a href=https://www.eclipse.org/artwork/>Logo and Artwork</a></li><li><a href=https://www.eclipse.org/org/foundation/directors.php></a></li></ul></div><div class="col-12 col-sm-4"><h4>Legal</h4><ul><li><a href=https://www.eclipse.org/legal/privacy.php>Privacy Policy</a></li><li><a href=https://www.eclipse.org/legal/termsofuse.php>Terms of Use</a></li><li><a href=https://www.eclipse.org/legal/copyright.php>Copyright Agent</a></li><li><a href=https://www.eclipse.org/legal/epl-2.0/>Eclipse Public License</a></li><li><a href=https://www.eclipse.org/legal/>Legal Resources</a></li><li><a href=https://eclipse.org/security/ target=_blank>Report a Vulnerability</a></li></ul></section></div></div><p class=powered-by>Copyright © Eclipse Foundation, Inc. All Rights Reserved.</p><p class=powered-by>Powered by the
<a href=https://wowchemy.com/ target=_blank rel=noopener>Wowchemy theme</a>
for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></main></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js integrity="sha512-7t8APmYpzEsZP7CYoA7RfMPV9Bb+PJHa9x2WiUnDXZx3XHveuyWUtvNOexhkierl5flZ3tr92dP1mMS+SGlD+A==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/java.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/kotlin.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/cpp.min.js></script><script>const code_highlighting=true;</script><script>const search_config={"indexURI":"/keyple-website/index.json","minLength":1,"threshold":0.3};const i18n={"no_results":"No results found","placeholder":"Search...","results":"results found"};const content_type={'post':"Posts",'project':"Projects",'publication':"Publications",'talk':"Talks",'slides':"Slides"};</script><script src=https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin=anonymous></script><script>anchors.add();</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/keyple-website/js/academic.min.685aa588f098e3a2bb14612211c3de9e.js></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>